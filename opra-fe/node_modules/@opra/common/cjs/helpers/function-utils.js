"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveClass = exports.resolveThunk = void 0;
const tslib_1 = require("tslib");
const putil_promisify_1 = tslib_1.__importDefault(require("putil-promisify"));
const type_guards_js_1 = require("./type-guards.js");
async function resolveThunk(thunk) {
    thunk = putil_promisify_1.default.isPromise(thunk) ? await thunk : thunk;
    if (typeof thunk === 'function') {
        if ((0, type_guards_js_1.isConstructor)(thunk))
            return thunk;
        return resolveClass(thunk());
    }
    return thunk;
}
exports.resolveThunk = resolveThunk;
async function resolveClass(thunk) {
    thunk = putil_promisify_1.default.isPromise(thunk) ? await thunk : thunk;
    if (typeof thunk !== 'function')
        throw new Error(`No Class type resolved`);
    if ((0, type_guards_js_1.isConstructor)(thunk))
        return thunk;
    return resolveClass(thunk());
}
exports.resolveClass = resolveClass;
