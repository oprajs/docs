"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Container = void 0;
const tslib_1 = require("tslib");
const putil_merge_1 = tslib_1.__importDefault(require("putil-merge"));
const constants_js_1 = require("../constants.js");
const container_class_js_1 = require("./container-class.js");
const container_decorator_js_1 = require("./container-decorator.js");
/**
 * @class Container
 * @decorator Container
 */
exports.Container = function (...args) {
    // ClassDecorator
    if (!this) {
        const [options] = args;
        return exports.Container[constants_js_1.DECORATOR].call(undefined, options);
    }
    // Constructor
    const [parent, init] = args;
    (0, putil_merge_1.default)(this, new container_class_js_1.ContainerClass(parent, init), { descriptor: true });
    if (init.resources) {
        const container = this;
        init.resources.forEach(r => container.resources.set(r.name, r));
    }
};
exports.Container.prototype = container_class_js_1.ContainerClass.prototype;
Object.assign(exports.Container, container_decorator_js_1.ContainerDecorator);
exports.Container[constants_js_1.DECORATOR] = container_decorator_js_1.ContainerDecorator;
