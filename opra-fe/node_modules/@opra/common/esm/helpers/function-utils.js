import promisify from 'putil-promisify';
import { isConstructor } from './type-guards.js';
export async function resolveThunk(thunk) {
    thunk = promisify.isPromise(thunk) ? await thunk : thunk;
    if (typeof thunk === 'function') {
        if (isConstructor(thunk))
            return thunk;
        return resolveClass(thunk());
    }
    return thunk;
}
export async function resolveClass(thunk) {
    thunk = promisify.isPromise(thunk) ? await thunk : thunk;
    if (typeof thunk !== 'function')
        throw new Error(`No Class type resolved`);
    if (isConstructor(thunk))
        return thunk;
    return resolveClass(thunk());
}
