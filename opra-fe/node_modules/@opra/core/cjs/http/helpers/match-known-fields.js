"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchKnownFields = exports.ARRAY_FIELD = exports.SEMICOLON_DELIMITED_FIELD = exports.COMMA_DELIMITED_FIELD = exports.NO_DUPLICATES_FIELD = void 0;
const common_1 = require("@opra/common");
exports.NO_DUPLICATES_FIELD = 0;
exports.COMMA_DELIMITED_FIELD = 1;
exports.SEMICOLON_DELIMITED_FIELD = 2;
exports.ARRAY_FIELD = 3;
const ARRAY_HEADERS = [
    'set-cookie'
];
const NO_DUPLICATES_HEADERS = [
    'age',
    'from',
    'etag',
    'server',
    'referer',
    'referrer',
    'expires',
    'location',
    'user-agent',
    'retry-after',
    'content-type',
    'content-length',
    'max-forwards',
    'last-modified',
    'authorization',
    'proxy-authorization',
    'if-modified-since',
    'if-unmodified-since',
];
const SEMICOLON_DELIMITED_HEADERS = ['cookie'];
const KNOWN_FIELDS = Object.values(common_1.HttpHeaderCodes)
    .reduce((o, k) => {
    const n = k.toLowerCase();
    o[n] = [k,
        (NO_DUPLICATES_HEADERS.includes(n) ? exports.NO_DUPLICATES_FIELD :
            (ARRAY_HEADERS.includes(n) ? exports.ARRAY_FIELD :
                (SEMICOLON_DELIMITED_HEADERS.includes(n) ? exports.SEMICOLON_DELIMITED_FIELD : exports.COMMA_DELIMITED_FIELD)))
    ];
    return o;
}, {});
function matchKnownFields(field) {
    const x = KNOWN_FIELDS[field.toLowerCase()];
    return x ? x : [field, exports.COMMA_DELIMITED_FIELD];
}
exports.matchKnownFields = matchKnownFields;
