"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.union = void 0;
const index_js_1 = require("../core/index.js");
/**
 *
 */
function union(codecs) {
    const l = codecs.length;
    return (0, index_js_1.validator)('union', function (input, context, _this) {
        let i;
        let c;
        let v;
        let passed = false;
        // Mock fail method to prevent errors
        context.fail = () => passed = false;
        for (i = 0; i < l; i++) {
            c = codecs[i];
            try {
                passed = true;
                v = c(input, context);
                if (passed)
                    break;
            }
            catch {
                //
            }
        }
        // Restore fail method
        delete context.fail;
        if (passed)
            return v;
        context.fail(_this, `{{location}} didn't match any of required format`, input);
    });
}
exports.union = union;
