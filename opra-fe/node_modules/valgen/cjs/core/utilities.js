"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.iif = exports.forwardRef = void 0;
const index_js_1 = require("./index.js");
/**
 * Forwards codec process to a sub codec. Useful for circular checks
 * @validator forwardRef
 */
function forwardRef(fn) {
    return (0, index_js_1.validator)('forwardRef', function (input, context) {
        const nested = fn(context);
        return nested(input, context);
    });
}
exports.forwardRef = forwardRef;
function iif(check, _then, _else) {
    return (0, index_js_1.validator)('iif', function (input, context) {
        let c = _else;
        try {
            if (check(input) !== undefined)
                c = _then;
        }
        catch {
            // ignored
        }
        if ((0, index_js_1.isValidator)(c))
            return c(input, context);
        return c;
    });
}
exports.iif = iif;
